<!DOCTYPE html>
<!-- saved from url=(0055)https://javascript.info/bubbling-and-capturing#bubbling -->
<html lang="en" data-theme-enabled="1" data-theme="dark" class="working-hover"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style> [data-use-theme] { visibility: hidden } </style><script>window.currentUser = null;</script><script>window.shopCurrency = "USD";</script><script>window.localCurrency = "USD";</script><script>window.countryCode = "us";</script><script>window.rateShopTo = {"USD":1,"EUR":0.961839,"AMD":395.341739};</script><title itemprop="name">Bubbling and capturing</title><link href="./Bubbling and capturing_files/styles.1dfb5e20b5a68f9f4908.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="./Bubbling and capturing_files/css" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="https://javascript.info/img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://javascript.info/bubbling-and-capturing"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="https://javascript.info/img/favicon/favicon.png"><meta itemprop="image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Bubbling and capturing"><meta property="og:image" content="https://javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Bubbling and capturing"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="https://javascript.info/introduction-browser-events"><link rel="next" href="https://javascript.info/event-delegation"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="./Bubbling and capturing_files/analytics.js.descarga" async=""></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="./Bubbling and capturing_files/watch.js.descarga" async=""></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="./Bubbling and capturing_files/init.28cff4e2f2e7cecb3d99.js.descarga"></script><script src="./Bubbling and capturing_files/head.dce256bf169d66aab153.js.descarga" defer=""></script><meta property="og:title" content="Bubbling and capturing"><meta property="og:type" content="article"><script src="./Bubbling and capturing_files/tutorial.3ffa7cc0fc7d8326505e.js.descarga" defer="" data-manual="1"></script><script src="./Bubbling and capturing_files/footer.a24f7192d4aa2f169615.js.descarga" defer=""></script><style>[_nghost-loc-c52]{font-family:Open Sans,sans-serif;color:#121212}</style><style type="text/css">@font-face { font-family: Roboto; src: url("chrome-extension://mcgbeeipkmelnpldkobichboakdfaeon/css/Roboto-Regular.ttf"); }</style><script id="_carbonads_projs" type="text/javascript" src="./Bubbling and capturing_files/CE7D42QJ.json"></script><style type="text/css" id="tts-styles">[data-tts-block-id].tts-active {background: rgba(206, 225, 255, 0.9) !important;} [data-tts-sentence-id].tts-active {background: rgba(0, 89, 191, 0.7) !important;}</style></head><body class=""><script>window.fontTest();</script><span class="font-test" style=""></span><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">Sorry, Internet Explorer is not supported, please use a newer browser.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"ky","name":"Kyrgyz"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"ms","name":"Malay"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "en";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if(!o&&"ru"!=lang&&"en"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler="">EN</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="https://javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fa.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">FA</span><span class="supported-langs__title">فارسی</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/bubbling-and-capturing"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li></ul><ul class="supported-langs__list" style="height:20px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://zh.javascript.info/bubbling-and-capturing"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text"><p>We want to make this open-source project available for people all around the world.</p> <p><a href="https://javascript.info/translate">Help to translate</a> the content of this tutorial to your language!</p>
</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="https://javascript.info/"><object type="image/svg+xml" class="sitetoolbar__logo sitetoolbar__logo_normal" data="./Bubbling and capturing_files/sitetoolbar__logo_en.svg" style="left: 0px; top: 0px; position: absolute;"></object><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="./Bubbling and capturing_files/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"><object type="image/svg+xml" class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" data="./Bubbling and capturing_files/sitetoolbar__logo_en-white.svg" style="left: 0px; top: 0px; position: absolute;"></object><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="./Bubbling and capturing_files/sitetoolbar__logo_en-white.svg" width="200" alt="" role="presentation" style="visibility: hidden;"><object type="image/svg+xml" class="sitetoolbar__logo sitetoolbar__logo_small" data="./Bubbling and capturing_files/sitetoolbar__logo_small_en.svg" style="left: 0px; top: 0px; position: absolute;"></object><img class="sitetoolbar__logo sitetoolbar__logo_small" src="./Bubbling and capturing_files/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"><object type="image/svg+xml" class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" data="./Bubbling and capturing_files/sitetoolbar__logo_small_en-white.svg" style="left: 0px; top: 0px; position: absolute;"></object><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="./Bubbling and capturing_files/sitetoolbar__logo_small_en-white.svg" width="70" alt="" role="presentation"><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="https://javascript.info/ebook"><span class="buy-book-button__extra-text">Buy</span>EPUB/PDF</a></div><div class="sitetoolbar__login-wrap"><button class="sitetoolbar__login" data-action-login=""></button></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="https://javascript.info/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="Search on Javascript.info" required="required" type="text"></div><button class="sitetoolbar__find" type="submit">Search</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="https://javascript.info/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Search in the tutorial" required="required"><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Search</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="https://javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/bubbling-and-capturing">عربي</option><option value="https://javascript.info/bubbling-and-capturing" selected="">English</option><option value="https://es.javascript.info/bubbling-and-capturing">Español</option><option value="https://fa.javascript.info/bubbling-and-capturing">فارسی</option><option value="https://fr.javascript.info/">Français</option><option value="https://id.javascript.info/bubbling-and-capturing">Indonesia</option><option value="https://it.javascript.info/bubbling-and-capturing">Italiano</option><option value="https://ja.javascript.info/bubbling-and-capturing">日本語</option><option value="https://ko.javascript.info/bubbling-and-capturing">한국어</option><option value="https://learn.javascript.ru/bubbling-and-capturing">Русский</option><option value="https://tr.javascript.info/bubbling-and-capturing">Türkçe</option><option value="https://uk.javascript.info/">Українська</option><option value="https://zh.javascript.info/bubbling-and-capturing">简体中文</option></select></div></div></div><div style="width: 1519px; margin: 0px; position: static; height: 3px;"></div></div><div class="page page_sidebar_on page_inner_padding page_sidebar-animation-on"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="https://javascript.info/"><span class="breadcrumbs__hidden-text">Tutorial</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="https://javascript.info/ui"><span>Browser: Document, Events, Interfaces</span></a></li><li class="breadcrumbs__item" id="breadcrumb-2"><a class="breadcrumbs__link" href="https://javascript.info/events"><span>Introduction to Events</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial","item":"https://javascript.info/"},{"@type":"ListItem","position":2,"name":"Browser: Document, Events, Interfaces","item":"https://javascript.info/ui"},{"@type":"ListItem","position":3,"name":"Introduction to Events","item":"https://javascript.info/events"}]}</script></ol><div class="updated-at" data-tooltip="Last updated on October 14, 2022"><div class="updated-at__content">October 14, 2022</div></div></div><h1 class="main__header-title">Bubbling and capturing</h1></div></header><div class="content"><article class="formatted" itemscope="" itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Bubbling and capturing"><div itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>Let’s start with an example.</p>
<p>This handler is assigned to <code>&lt;div&gt;</code>, but also runs if you click any nested tag like <code>&lt;em&gt;</code> or <code>&lt;code&gt;</code>:</p>
<div id="92kz25448i" data-trusted="1" class="code-example" data-demo-height="60" data-autorun="true" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-markup" tabindex="0"><span class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'The handler!'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>If you click on <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span>EM<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span>, the handler on <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span>DIV<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span> runs.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe class="code-result__iframe" name="test-92kz25448i" style="height:60px" src="./Bubbling and capturing_files/saved_resource.html"></iframe>
        </div>
      </div><p>Isn’t it a bit strange? Why does the handler on <code>&lt;div&gt;</code> run if the actual click was on <code>&lt;em&gt;</code>?</p>
<h2><a class="main__anchor" name="bubbling" href="https://javascript.info/bubbling-and-capturing#bubbling">Bubbling</a></h2><p>The bubbling principle is simple.</p>
<p><strong>When an event happens on an element, it first runs the handlers on it, then on its parent, then all the way up on other ancestors.</strong></p>
<p>Let’s say we have 3 nested elements <code>FORM &gt; DIV &gt; P</code> with a handler on each of them:</p>
<div id="ewzo40etnh" data-trusted="1" class="code-example" data-autorun="true" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="show" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-markup" tabindex="0"><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">body *</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid blue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>FORM
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>DIV
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>P<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe class="code-result__iframe" name="test-ewzo40etnh" style="display: block; height: 122px;" src="./Bubbling and capturing_files/saved_resource(1).html"></iframe>
        </div>
      </div><p>A click on the inner <code>&lt;p&gt;</code> first runs <code>onclick</code>:</p>
<ol>
<li>On that <code>&lt;p&gt;</code>.</li>
<li>Then on the outer <code>&lt;div&gt;</code>.</li>
<li>Then on the outer <code>&lt;form&gt;</code>.</li>
<li>And so on upwards till the <code>document</code> object.</li>
</ol>
<figure><div class="image" style="width:353px">
      <div class="image__ratio" style="padding-top:61.18980169971672%"></div>
      <object type="image/svg+xml" data="./Bubbling and capturing_files/event-order-bubbling.svg" width="353" height="216" class="image__image" data-use-theme="" style="visibility: visible;">
        <img src="./Bubbling and capturing_files/event-order-bubbling.svg" alt="" width="353" height="216">
      </object>
      </div></figure><p>So if we click on <code>&lt;p&gt;</code>, then we’ll see 3 alerts: <code>p</code> → <code>div</code> → <code>form</code>.</p>
<p>The process is called “bubbling”, because events “bubble” from the inner element up through parents like a bubble in the water.</p>
<div class="important important_warn">
            <div class="important__header"><span class="important__type"><em>Almost</em> all events bubble.</span></div>
            <div class="important__content"><p>The key word in this phrase is “almost”.</p>
<p>For instance, a <code>focus</code> event does not bubble. There are other examples too, we’ll meet them. But still it’s an exception, rather than a rule, most events do bubble.</p>
</div></div>
<h2><a class="main__anchor" name="event-target" href="https://javascript.info/bubbling-and-capturing#event-target">event.target</a></h2><p>A handler on a parent element can always get the details about where it actually happened.</p>
<p><strong>The most deeply nested element that caused the event is called a <em>target</em> element, accessible as <code>event.target</code>.</strong></p>
<p>Note the differences from <code>this</code> (=<code>event.currentTarget</code>):</p>
<ul>
<li><code>event.target</code> – is the “target” element that initiated the event, it doesn’t change through the bubbling process.</li>
<li><code>this</code> – is the “current” element, the one that has a currently running handler on it.</li>
</ul>
<p>For instance, if we have a single handler <code>form.onclick</code>, then it can “catch” all clicks inside the form. No matter where the click happened, it bubbles up to <code>&lt;form&gt;</code> and runs the handler.</p>
<p>In <code>form.onclick</code> handler:</p>
<ul>
<li><code>this</code> (=<code>event.currentTarget</code>) is the <code>&lt;form&gt;</code> element, because the handler runs on it.</li>
<li><code>event.target</code> is the actual element inside the form that was clicked.</li>
</ul>
<p>Check it out:</p>
<div class="code-tabs code-tabs_result_on" data-prism-highlighted="1"><div class="code-tabs__tools"><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_left" title="&amp;larr;" data-code-tabs-left="data-code-tabs-left"></button></div><div class="code-tabs__switches-wrap"><div class="code-tabs__switches" data-code-tabs-switches="data-code-tabs-switches"><div class="code-tabs__switches-items"><div class="code-tabs__switch code-tabs__switch_current">Result</div><div class="code-tabs__switch">script.js</div><div class="code-tabs__switch">example.css</div><div class="code-tabs__switch">index.html</div></div></div></div><div class="code-tabs__scroll-wrap"><button class="code-tabs__scroll-button code-tabs__scroll-button_right" title="&amp;rarr;" data-code-tabs-right="data-code-tabs-right"></button></div><div class="code-tabs__buttons"><a class="code-tabs__button code-tabs__button_external" target="_blank" title="open in a new window" href="https://javascript.info/article/bubbling-and-capturing/bubble-target/"></a><a class="code-tabs__button code-tabs__button_edit" target="_blank" title="edit in the sandbox" href="https://plnkr.co/edit/eiVixZwxlxFG9dyx?p=preview"></a></div></div><div class="code-tabs__content" data-code-tabs-content="data-code-tabs-content" style="height:220px"><div class="code-tabs__section code-tabs__section_current"><iframe class="code-tabs__result" src="./Bubbling and capturing_files/saved_resource(2).html"></iframe></div><div class="code-tabs__section"><pre class="language-javascript line-numbers"><code>form.onclick = function(event) {
  event.target.style.backgroundColor = 'yellow';

  // chrome needs some time to paint yellow
  setTimeout(() =&gt; {
    alert("target = " + event.target.tagName + ", this=" + this.tagName);
    event.target.style.backgroundColor = ''
  }, 0);
};</code></pre></div><div class="code-tabs__section"><pre class="language-css line-numbers"><code>form {
  background-color: green;
  position: relative;
  width: 150px;
  height: 150px;
  text-align: center;
  cursor: pointer;
}

div {
  background-color: blue;
  position: absolute;
  top: 25px;
  left: 25px;
  width: 100px;
  height: 100px;
}

p {
  background-color: red;
  position: absolute;
  top: 25px;
  left: 25px;
  width: 50px;
  height: 50px;
  line-height: 50px;
  margin: 0;
}

body {
  line-height: 25px;
  font-size: 16px;
}</code></pre></div><div class="code-tabs__section"><pre class="language-markup line-numbers"><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;link rel="stylesheet" href="example.css"&gt;
&lt;/head&gt;

&lt;body&gt;
  A click shows both &lt;code&gt;event.target&lt;/code&gt; and &lt;code&gt;this&lt;/code&gt; to compare:

  &lt;form id="form"&gt;FORM
    &lt;div&gt;DIV
      &lt;p&gt;P&lt;/p&gt;
    &lt;/div&gt;
  &lt;/form&gt;

  &lt;script src="script.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></div></div></div><p>It’s possible that <code>event.target</code> could equal <code>this</code> – it happens when the click is made directly on the <code>&lt;form&gt;</code> element.</p>
<h2><a class="main__anchor" name="stopping-bubbling" href="https://javascript.info/bubbling-and-capturing#stopping-bubbling">Stopping bubbling</a></h2><p>A bubbling event goes from the target element straight up. Normally it goes upwards till <code>&lt;html&gt;</code>, and then to <code>document</code> object, and some events even reach <code>window</code>, calling all handlers on the path.</p>
<p>But any handler may decide that the event has been fully processed and stop the bubbling.</p>
<p>The method for it is <code>event.stopPropagation()</code>.</p>
<p>For instance, here <code>body.onclick</code> doesn’t work if you click on <code>&lt;button&gt;</code>:</p>
<div id="dqvju0j9g6" data-trusted="1" class="code-example" data-demo-height="60" data-autorun="true" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="show" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-markup" tabindex="0"><span class="line-numbers-rows"><span></span><span></span><span></span></span><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the bubbling doesn't reach here</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>Click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe class="code-result__iframe" name="test-dqvju0j9g6" style="height:60px" src="./Bubbling and capturing_files/saved_resource(3).html"></iframe>
        </div>
      </div><div class="important important_smart">
            <div class="important__header"><span class="important__type">event.stopImmediatePropagation()</span></div>
            <div class="important__content"><p>If an element has multiple event handlers on a single event, then even if one of them stops the bubbling, the other ones still execute.</p>
<p>In other words, <code>event.stopPropagation()</code> stops the move upwards, but on the current element all other handlers will run.</p>
<p>To stop the bubbling and prevent handlers on the current element from running, there’s a method <code>event.stopImmediatePropagation()</code>. After it no other handlers execute.</p>
</div></div>
<div class="important important_warn">
            <div class="important__header"><span class="important__type">Don’t stop bubbling without a need!</span></div>
            <div class="important__content"><p>Bubbling is convenient. Don’t stop it without a real need: obvious and architecturally well thought out.</p>
<p>Sometimes <code>event.stopPropagation()</code> creates hidden pitfalls that later may become problems.</p>
<p>For instance:</p>
<ol>
<li>We create a nested menu. Each submenu handles clicks on its elements and calls <code>stopPropagation</code> so that the outer menu won’t trigger.</li>
<li>Later we decide to catch clicks on the whole window, to track users’ behavior (where people click). Some analytic systems do that. Usually the code uses <code>document.addEventListener('click'…)</code> to catch all clicks.</li>
<li>Our analytic won’t work over the area where clicks are stopped by <code>stopPropagation</code>. Sadly, we’ve got a “dead zone”.</li>
</ol>
<p>There’s usually no real need to prevent the bubbling. A task that seemingly requires that may be solved by other means. One of them is to use custom events, we’ll cover them later. Also we can write our data into the <code>event</code> object in one handler and read it in another one, so we can pass to handlers on parents information about the processing below.</p>
</div></div>
<h2><a class="main__anchor" name="capturing" href="https://javascript.info/bubbling-and-capturing#capturing">Capturing</a></h2><p>There’s another phase of event processing called “capturing”. It is rarely used in real code, but sometimes can be useful.</p>
<p>The standard <a href="https://www.w3.org/TR/DOM-Level-3-Events/">DOM Events</a> describes 3 phases of event propagation:</p>
<ol>
<li>Capturing phase – the event goes down to the element.</li>
<li>Target phase – the event reached the target element.</li>
<li>Bubbling phase – the event bubbles up from the element.</li>
</ol>
<p>Here’s the picture, taken from the specification, of the capturing <code>(1)</code>, target <code>(2)</code> and bubbling <code>(3)</code> phases for a click event on a <code>&lt;td&gt;</code> inside a table:</p>
<figure><div class="image" style="width:641px">
      <div class="image__ratio" style="padding-top:98.75195007800312%"></div>
      <object type="image/svg+xml" data="./Bubbling and capturing_files/eventflow.svg" width="641" height="633" class="image__image" data-use-theme="" style="visibility: visible;">
        <img src="./Bubbling and capturing_files/eventflow.svg" alt="" width="641" height="633">
      </object>
      </div></figure><p>That is: for a click on <code>&lt;td&gt;</code> the event first goes through the ancestors chain down to the element (capturing phase), then it reaches the target and triggers there (target phase), and then it goes up (bubbling phase), calling handlers on its way.</p>
<p>Until now, we only talked about bubbling, because the capturing phase is rarely used.</p>
<p>In fact, the capturing phase was invisible for us, because handlers added using <code>on&lt;event&gt;</code>-property or using HTML attributes or using two-argument <code>addEventListener(event, handler)</code> don’t know anything about capturing, they only run on the 2nd and 3rd phases.</p>
<p>To catch an event on the capturing phase, we need to set the handler <code>capture</code> option to <code>true</code>:</p>
<div id="ijethb4rys" data-trusted="1" class="code-example" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-javascript" tabindex="0"><span class="line-numbers-rows"><span></span><span></span><span></span><span></span></span><code class=" language-javascript">elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>capture<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// or, just "true" is an alias to {capture: true}</span>
elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></code></pre>
        </div>
      </div>
      
      </div><p>There are two possible values of the <code>capture</code> option:</p>
<ul>
<li>If it’s <code>false</code> (default), then the handler is set on the bubbling phase.</li>
<li>If it’s <code>true</code>, then the handler is set on the capturing phase.</li>
</ul>
<p>Note that while formally there are 3 phases, the 2nd phase (“target phase”: the event reached the element) is not handled separately: handlers on both capturing and bubbling phases trigger at that phase.</p>
<p>Let’s see both capturing and bubbling in action:</p>
<div id="5paju9y85l" data-trusted="1" class="code-example" data-demo-height="140" data-autorun="true" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="show" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="https://javascript.info/bubbling-and-capturing#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-markup" tabindex="0"><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">body *</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid blue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>FORM
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>DIV
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>P<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> elem <span class="token keyword">of</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Capturing: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>elem<span class="token punctuation">.</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bubbling: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>elem<span class="token punctuation">.</span>tagName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe class="code-result__iframe" name="test-5paju9y85l" style="height:140px" src="./Bubbling and capturing_files/saved_resource(4).html"></iframe>
        </div>
      </div><p>The code sets click handlers on <em>every</em> element in the document to see which ones are working.</p>
<p>If you click on <code>&lt;p&gt;</code>, then the sequence is:</p>
<ol>
<li><code>HTML</code> → <code>BODY</code> → <code>FORM</code> → <code>DIV -&gt; P</code> (capturing phase, the first listener):</li>
<li><code>P</code> → <code>DIV</code> → <code>FORM</code> → <code>BODY</code> → <code>HTML</code> (bubbling phase, the second listener).</li>
</ol>
<p>Please note, the <code>P</code> shows up twice, because we’ve set two listeners: capturing and bubbling. The target triggers at the end of the first and at the beginning of the second phase.</p>
<p>There’s a property <code>event.eventPhase</code> that tells us the number of the phase on which the event was caught. But it’s rarely used, because we usually know it in the handler.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">To remove the handler, <code>removeEventListener</code> needs the same phase</span></div>
            <div class="important__content"><p>If we <code>addEventListener(..., true)</code>, then we should mention the same phase in <code>removeEventListener(..., true)</code> to correctly remove the handler.</p>
</div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">Listeners on the same element and same phase run in their set order</span></div>
            <div class="important__content"><p>If we have multiple event handlers on the same phase, assigned to the same element with <code>addEventListener</code>, they run in the same order as they are created:</p>
<div id="sfr0pyuhoo" data-trusted="1" class="code-example" data-prism-highlighted="1">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers  language-javascript" tabindex="0"><span class="line-numbers-rows"><span></span><span></span></span><code class=" language-javascript">elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// guaranteed to trigger first</span>
elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
        </div>
      </div>
      
      </div></div></div>
<div class="important important_smart">
            <div class="important__header"><span class="important__type">The <code>event.stopPropagation()</code> during the capturing also prevents the bubbling</span></div>
            <div class="important__content"><p>The <code>event.stopPropagation()</code> method and its sibling <code>event.stopImmediatePropagation()</code> can also be called on the capturing phase. Then not only the futher capturing is stopped, but the bubbling as well.</p>
<p>In other words, normally the event goes first down (“capturing”) and then up (“bubbling”). But if <code>event.stopPropagation()</code> is called during the capturing phase, then the event travel stops, no bubbling will occur.</p>
</div></div>
<h2><a class="main__anchor" name="summary" href="https://javascript.info/bubbling-and-capturing#summary">Summary</a></h2><p>When an event happens – the most nested element where it happens gets labeled as the “target element” (<code>event.target</code>).</p>
<ul>
<li>Then the event moves down from the document root to <code>event.target</code>, calling handlers assigned with <code>addEventListener(..., true)</code> on the way (<code>true</code> is a shorthand for <code>{capture: true}</code>).</li>
<li>Then handlers are called on the target element itself.</li>
<li>Then the event bubbles up from <code>event.target</code> to the root, calling handlers assigned using <code>on&lt;event&gt;</code>, HTML attributes and <code>addEventListener</code> without the 3rd argument or with the 3rd argument <code>false/{capture:false}</code>.</li>
</ul>
<p>Each handler can access <code>event</code> object properties:</p>
<ul>
<li><code>event.target</code> – the deepest element that originated the event.</li>
<li><code>event.currentTarget</code> (=<code>this</code>) – the current element that handles the event (the one that has the handler on it)</li>
<li><code>event.eventPhase</code> – the current phase (capturing=1, target=2, bubbling=3).</li>
</ul>
<p>Any event handler can stop the event by calling <code>event.stopPropagation()</code>, but that’s not recommended, because we can’t really be sure we won’t need it above, maybe for completely different things.</p>
<p>The capturing phase is used very rarely, usually we handle events on bubbling. And there’s a logical explanation for that.</p>
<p>In real world, when an accident happens, local authorities react first. They know best the area where it happened. Then higher-level authorities if needed.</p>
<p>The same for event handlers. The code that set the handler on a particular element knows maximum details about the element and what it does. A handler on a particular <code>&lt;td&gt;</code> may be suited for that exactly <code>&lt;td&gt;</code>, it knows everything about it, so it should get the chance first. Then its immediate parent also knows about the context, but a little bit less, and so on till the very top element that handles general concepts and runs the last one.</p>
<p>Bubbling and capturing lay the foundation for “event delegation” – an extremely powerful event handling pattern that we study in the next chapter.</p>
</div></article></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="https://javascript.info/introduction-browser-events" data-tooltip="Introduction to browser events"><span class="page__nav-text"><span class="page__nav-text-shortcut">Ctrl + <span class="page__nav-text-arr">←</span></span></span><span class="page__nav-text-alternate">Previous lesson</span></a><a class="page__nav page__nav_next" href="https://javascript.info/event-delegation" data-tooltip="Event delegation"><span class="page__nav-text"><span class="page__nav-text-shortcut">Ctrl + <span class="page__nav-text-arr">→</span></span></span><span class="page__nav-text-alternate">Next lesson</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="https://javascript.info/tutorial/map" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="https://javascript.info/bubbling-and-capturing#comments" name="comments">Comments</a></h2><div class="comments__read-before"><span class="comments__read-before-link">read this before commenting…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>If you have suggestions what to improve - please <a href="https://github.com/javascript-tutorial/en.javascript.info/issues/new">submit a GitHub issue</a> or a pull request instead of commenting.</li><li>If you can't understand something in the article – please elaborate.</li><li>To insert few words of code, use the <code>&lt;code&gt;</code> tag, for several lines – wrap them in <code>&lt;pre&gt;</code> tag, for more than 10 lines – use a sandbox (<a href="https://plnkr.co/edit/?p=preview">plnkr</a>, <a href="https://jsbin.com/">jsbin</a>, <a href="http://codepen.io/">codepen</a>…)</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/javascript.info\/bubbling-and-capturing","identifier":"\/bubbling-and-capturing"}); };</script><script>var disqus_shortname = "javascriptinfo";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer" style="top: 0px;"><button class="sidebar__toggle" data-sidebar-toggle=""></button><a class="map" href="https://javascript.info/tutorial/map" data-action="tutorial-map" data-tooltip="Tutorial map"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Chapter</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/events">Introduction to Events</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Lesson navigation</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link sidebar__navigation-link_active" href="https://javascript.info/bubbling-and-capturing#bubbling">Bubbling</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/bubbling-and-capturing#event-target">event.target</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/bubbling-and-capturing#stopping-bubbling">Stopping bubbling</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/bubbling-and-capturing#capturing">Capturing</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/bubbling-and-capturing#summary">Summary</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="https://javascript.info/bubbling-and-capturing#comments">Comments</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Share</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fjavascript.info%2Fbubbling-and-capturing" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/en.javascript.info/blob/master/2-ui/2-events/02-bubbling-and-capturing" rel="nofollow">Edit on GitHub</a></div><div class="sidebar__section" id="sponsorBar"><div class="sidebar__section-title" id="sponsorBarTitle">Ad by Carbon</div><div id="sponsorBarContent"><script src="./Bubbling and capturing_files/carbon.js.descarga" id="_carbonads_js"></script><div id="carbonads"><span><span class="carbon-wrap"><a href="https://srv.carbonads.net/ads/click/x/GTND42JNF6SDTK7YCESLYKQNCYAIP53JCTBDKZ3JCYSITKQUCVSI42JKCWSI5KJNCWSIP23MFTSI5K7YF6BIE23KC6SDK5QNCVAIKK3EHJNCLSIZ?segment=placement:javascriptinfo;" class="carbon-img" target="_blank" rel="noopener sponsored"><img src="./Bubbling and capturing_files/1668618930-SumoLogic-CarbonREVISED.png" alt="ads via Carbon" border="0" height="100" width="130" style="max-width: 130px;"></a><a href="https://srv.carbonads.net/ads/click/x/GTND42JNF6SDTK7YCESLYKQNCYAIP53JCTBDKZ3JCYSITKQUCVSI42JKCWSI5KJNCWSIP23MFTSI5K7YF6BIE23KC6SDK5QNCVAIKK3EHJNCLSIZ?segment=placement:javascriptinfo;" class="carbon-text" target="_blank" rel="noopener sponsored">Sumo Logic named a Challenger in 2022 Gartner Magic Quadrant for APM and Observability</a></span><a href="http://carbonads.net/?utm_source=javascriptinfo&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=carbon" class="carbon-poweredby" target="_blank" rel="noopener sponsored">ads via Carbon</a></span></div></div><script>window.initSponsorBar()</script></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2022&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="https://javascript.info/about">about the project</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="https://javascript.info/about#contact-us">contact us</a></li><li class="page-footer__item page-footer__item_terms"><a class="page-footer__link" href="https://javascript.info/terms">terms of usage</a></li><li class="page-footer__item page-footer__item_privacy"><a class="page-footer__link" href="https://javascript.info/privacy">privacy policy</a></li></ul></div><progress class="tutorial-progress sticky" data-sticky="" value="13" max="32" data-tooltip="Lesson 13 of 32" style="position: fixed; top: 0px; left: 0px; z-index: 101; background: white; margin: 0px; width: 1519px;"></progress><script>
		var returnedSuggestion = ''
		let editor, doc, cursor, line, pos
		document.addEventListener("keydown", (event) => {
		setTimeout(()=>{
			editor = event.target.closest('.CodeMirror');
			if (editor){
				doc = editor.CodeMirror.getDoc()
				cursor = doc.getCursor()
				line = doc.getLine(cursor.line)
				pos = {line: cursor.line, ch: line.length}
				if (event.key == "Enter"){
					var query = doc.getRange({ line: Math.max(0,cursor.line-10), ch: 0 }, { line: cursor.line, ch: 0 })
					window.postMessage({source: 'getSuggestion', payload: { data: query } } )
					//displayGrey(query)
				}
				else if (event.key == "ArrowRight"){
					acceptTab(returnedSuggestion)
				}
			}
		}, 0)
		})

		function acceptTab(text){
		if (suggestionDisplayed){
			doc.replaceRange(text, pos)
			suggestionDisplayed = false
		}
		}
		function displayGrey(text){
		var element = document.createElement('span')
		element.innerText = text
		element.style = 'color:grey'
		var lineIndex = pos.line;
		editor.getElementsByClassName('CodeMirror-line')[lineIndex].appendChild(element)
		suggestionDisplayed = true
		}
		window.addEventListener('message', (event)=>{
		if (event.source !== window ) return
		if (event.data.source == 'return'){
			returnedSuggestion = event.data.payload.data
			displayGrey(event.data.payload.data)
		}
		})
	</script></body><app-content ng-version="14.2.0"></app-content></html>